<app-top-nav></app-top-nav>

<div class="page">
  <h1 class="title">Saved Items</h1>

  <div class="search">
    <input
      class="search-input"
      type="text"
      placeholder="Search (title, text, type, language)â€¦"
      [ngModel]="searchTerm"
      (ngModelChange)="onSearchChange($event)"
    />

    <select class="filter" [ngModel]="typeFilter" (ngModelChange)="onTypeChange($event)">
      <option *ngFor="let opt of typeOptions" [ngValue]="opt.value">
        {{ opt.label }}
      </option>
    </select>

    <select
      class="filter"
      [ngModel]="languageFilter"
      (ngModelChange)="onLanguageChange($event)"
      [disabled]="typeFilter !== 'snippet'"
    >
      <option [ngValue]="'all'">All languages</option>
      <option *ngFor="let lang of (languageOptions$ | async) ?? []" [ngValue]="lang">
        {{ lang }}
      </option>
    </select>

    <button class="search-clear" type="button" (click)="clearFilters()">
      Clear
    </button>
  </div>

  <app-item-list
    [items]="(filteredItems$ | async) ?? []"
    (deleteItem)="onDelete($event)"
  ></app-item-list>
</div>
